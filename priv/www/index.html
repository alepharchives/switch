<html>
  <head>
    <title>Phone Switch Simulator</title>
  </head>
  <body>
    <p>The <a href="#">Phone Switch Simulator</a> is intended to be used in a (fun) programming exercise.
    </p>
    <p>It provides a simple (silly?) abstraction of a telephone switch. 
      <br />
      By using a REST like HTTP interface you can:
    </p>
    <ul>
      <li>Create your own switch (wow... :-)</li>
      <li>Create subscribers in your switch</li>
      <li>Control the switch hardware, such as tone generation,
	event generation for on/off hook of the phone device 
	and of course to connect two subscribers to form a 
	regular phone call.
      </li>
    </ul>
    <p>The following curl commands describes what you can do (see also: http://switch.redhoterlang.com/x/help ):
    </p>
    <pre>
# Just to shorten the curl commands below
export switch="http://switch.redhoterlang.com"
export copts=-"s -H 'Content-Type: text/plain'"

# To create a Switch named: axe
curl ${copts} -d "" -X 'PUT' ${switch}/x/axe

# To get the Switch status. Returns: A textual status table.
# (tip: run this via the 'watch' command for an 'animated' experience)
curl ${copts} -X 'GET' ${switch}/x/axe

# To create a new Subscriber. Returns: <Ano>
curl ${copts} -X 'POST' ${switch}/x/axe/subscriber

# To control the on/off-hook of the receiver for a particular Subscriber
curl ${copts} -d "" -X 'PUT' ${switch}/x/axe/Ano/offhook
curl ${copts} -d "" -X 'DELETE' ${switch}/x/axe/Ano/offhook

# To control the tone generator and ringsignal in the Switch for a particular Subscriber
curl ${copts} -d "" -X 'PUT' ${switch}/x/axe/Ano/dialtone
curl ${copts} -d "" -X 'DELETE' ${switch}/x/axe/Ano/dialtone

curl ${copts} -d "" -X 'PUT' ${switch}/x/axe/Ano/busytone
curl ${copts} -d "" -X 'DELETE' ${switch}/x/axe/Ano/busytone

curl ${copts} -d "" -X 'PUT' ${switch}/x/axe/Ano/ringtone
curl ${copts} -d "" -X 'DELETE' ${switch}/x/axe/Ano/ringtone

curl ${copts} -d "" -X 'PUT' ${switch}/x/axe/Ano/ringsignal
curl ${copts} -d "" -X 'DELETE' ${switch}/x/axe/Ano/ringsignal

# To (dis-)connect two subscribers
curl ${copts} -d "" -X 'PUT' ${switch}/x/axe/Ano/connect/Bno
curl ${copts} -X 'DELETE' ${switch}/x/axe/Ano/connect/Bno
    </pre>
    <p>Now it is up to you to write a client program that simulates
      a couple of telephones that are connected to the switch. As a little
      help, think about it as a state event diagram, as shown below. 
      Especially note that your code must be able to function both as
      the calling party (A-side) and the receiving party (B-side).
    </p>
    <img src=/phone_state_event.jpg></img>
    <p>If you want to write the code in Erlang, then download the
      <i>Starter Kit</i>, which consists of two files: 
      <a href="/phone.erl">phone.erl</a> and <a href="/hw_lib.erl">hw_lib.erl</a>. 
      The first file is an embryo of the your phone control software
      where only the Idle State has been written. In the second file, you 
      have access to a little helper library that can talk to the switch,
      hiding the REST protocol. The rest is up to you.
    </p>
    <p>When you have succeeded the result could look something like in the
    video below:
    </p>
  </body>
</html>
